<!DOCTYPE html>
<html>
<head>
  <title>All Categories</title>

  <!-- Bootstrap CSS (MANDATORY) -->
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->

  <style>
body{
  background-color:#f4f6f9;
  font-family: "Segoe UI", Tahoma, sans-serif;
  padding:30px;
}

ol{
  max-width:600px;
  margin:auto;
  padding:0;
}

ol li{
  list-style-position: inside;
  background:#fff;
  margin-bottom:12px;
  padding:14px 16px;
  border-radius:6px;
  box-shadow:0 2px 8px rgba(0,0,0,0.08);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:15px;
}

ol li span{
  font-weight:600;
  color:#333;
}

ol li div a,
ol li div button{
  text-decoration:none;
  padding:5px 12px;
  border-radius:4px;
  font-size:13px;
  color:#fff;
  margin-left:6px;
  border:none;
}

/* Buttons */
.edit-btn{ background:#0d6efd; }
.status-btn{ background:purple; }
.delete-btn{ background:red; }

</style>
</head>

<body>

<form method="get" action="/searchCategory">
  <input type="text" name="s" placeholder="search any category">
  <button type="submit">Search</button>
</form>

<ol>
<% categories.forEach(c => { %>
  <li>
    <span><%= c.name %></span>

    <div>
      <a class="status-btn" href="/changeStatus/<%= c._id %>">
        <%= c.status ? "enabled" : "disabled" %>
      </a>

      <a class="edit-btn" href="/editCategory/<%= c._id %>">
        edit
      </a>

      <!-- ✅ MODAL TRIGGER -->
      <button
        type="button"
        class="delete-btn"
        data-bs-toggle="modal"
        data-bs-target="#deleteModal-<%= c._id %>">
        delete
      </button>
    </div>
  </li>

  <!-- ✅ MODAL (UNIQUE ID) -->
  <div class="modal fade"
       id="deleteModal-<%= c._id %>"
       tabindex="-1">

    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">

        <div class="modal-header">
          <h5 class="modal-title">Confirm Delete</h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"></button>
        </div>

        <div class="modal-body">
          Are you sure you want to delete
          <b><%= c.name %></b> ?
        </div>

        <div class="modal-footer">
          <button type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal">
            Cancel
          </button>

          <form method="POST"
                action="/deleteCategory/<%= c._id %>">
            <button type="submit"
                    class="btn btn-danger">
              Delete
            </button>
          </form>
        </div>

      </div>
    </div>
  </div>

<% }) %>
</ol>

<!-- Bootstrap JS (MANDATORY) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
